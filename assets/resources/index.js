System.register("chunks:///_virtual/ad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./pet.ts","./go.mjs_cjs=&original=.js","./wee.ts","./config.mjs_cjs=&original=.js","./gmm.ts","./config.js","./go.js"],(function(n){"use strict";var o,i,t,e,c,s,d,a,l,r;return{setters:[function(n){o=n.inheritsLoose,i=n.createClass},function(n){t=n.cclegacy,e=n._decorator,c=n.Component},function(n){s=n.pet},null,function(n){d=n.wee},null,function(n){a=n.gmm},function(n){l=n.default},function(n){r=n.default}],execute:function(){var u,f;t._RF.push({},"5f559clnlFNcYiFw+QUmfIG","ad",void 0);var A=e.ccclass;e.property,n("ad",A("ad")(((f=function(n){function t(){for(var o,i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return(o=n.call.apply(n,[this].concat(t))||this).videoAd=null,o.videoAdIsOk=!1,o.cpAd=null,o.cpAdIsOk=!1,o.loadNum=0,o}o(t,n);var e=t.prototype;return e.loadAD=function(){this.loadNum>1||(console.log("loadAD.."),l.showAD&&(0===this.loadNum?this.initAdCP():1===this.loadNum&&this.initAdJL(),this.loadNum++))},e.initAD=function(n,o){void 0===n&&(n=.3),void 0===o&&(o=8);var i=this;console.log("initAD.."),l.showAD?(i.scheduleOnce((function(){i.initAdCP()}),n),i.scheduleOnce((function(){i.initAdJL(),a.adLoaded=!0}),o)):a.adLoaded=!0},e.initAdJL=function(){var n=this;"wx"==r.getPlat()&&(n.videoAd=wx.createRewardedVideoAd({adUnitId:l.AD.AD_JL_ID}),n.videoAd.onLoad((function(){n.videoAdIsOk=!0,console.log("initAdJL ok...")})),n.videoAd.onError((function(n){console.warn("initAdJL err:",n)})))},e.showVideo=function(n){var o=this;if("wx"==r.getPlat()){var i=o.videoAd;i.show().catch((function(){i.load().then((function(){return i.show()})).catch((function(n){o.videoAdIsOk=!1,a.islock=!1,console.log("激励视频 广告显示失败")}))})),i.onError((function(n){o.videoAdIsOk=!1,a.islock=!1,console.log("videoAd onError:",n)})),i.onClose((function(o){a.islock=!1,i&&(i.offClose(),o&&o.isEnded||void 0===o?(console.log("gain success:"),n(1)):(n(2),console.log("gain fail:")))}))}},e.initAdCP=function(){var n=this;"wx"==r.getPlat()&&wx.createInterstitialAd&&(n.cpAd=wx.createInterstitialAd({adUnitId:l.AD.AD_CP_ID}),n.cpAd.onLoad((function(){console.log("initAdCP ok:"),n.cpAdIsOk=!0})),n.cpAd.onError((function(o){n.cpAdIsOk=!1,console.log("initAdCP err:",o)})))},e.showADCP=function(n){n||(n=function(){});"wx"==r.getPlat()&&this.cpAd&&this.cpAd.show().then((function(){console.log("showADCP ok:"),n()})).catch((function(o){console.warn("showADCP err2:",o),n()}))},e.activeShare=function(n){void 0===n&&(n=null),n||(n=function(){}),"wx"!=r.getPlat()||d.activeShare((function(){n()}))},e.passiveShare=function(){"wx"!=r.getPlat()||this.scheduleOnce((function(){d.passiveShare()}),5)},e.getGway=function(){var n=r.getRandom(0,100),o=s.relife.share;return n>=l.shareRate&&l.showAD&&this.videoAdIsOk&&(o=s.relife.video),o},i(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(c))._instance=void 0,u=f))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts"],(function(i){"use strict";var s,o,t,u,n,e;return{setters:[function(i){s=i.createClass},function(i){o=i.cclegacy,t=i._decorator,u=i.resources,n=i.AudioClip},function(i){e=i.util}],execute:function(){var a,c;o._RF.push({},"f7b9amc8zFOb6gCVEfyZmFk","audioManager",void 0);var l=t.ccclass;t.property,i("AudioManager",l("AudioManager")(((c=function(){function i(){this._musicVolume=1,this._soundVolume=1,this._audios={},this._arrSound=[]}var o=i.prototype;return o.init=function(){this._musicVolume=this.getAudioSetting(!0)?this._musicVolume:0,this._soundVolume=this.getAudioSetting(!1)?this._soundVolume:0},o.getAudioSetting=function(i){return"2"!=(i?e.getLocalJson("setting","music"):e.getLocalJson("setting","sound"))},o.playMusic=function(i,s,o){var t=this;void 0===o&&(o=-1);var e="audio/music/"+i;u.load(e,n,(function(u,n){if(u)console.error(u.message||u);else{var e={};e.clip=n,e.loop=s,e.isMusic=!0,t._audios[i]=e,t._playClip(i,!0,o)}}))},o.playSound=function(i,s,o){var t=this;if(void 0===s&&(s=100),void 0===o&&(o=-1),this._soundVolume){var e=this._audios[i],a=Date.now();if(o=o<0?this._soundVolume:o,e){if(a-e.last<s)return;e.clip.playOneShot(o),e.last=a}else{var c="audio/sound/";u.load(c+i,n,(function(s,u){if(s)console.error("playSound err(no file):",c+i);else{var n={};n.clip=u,n.loop=!1,n.isMusic=!1,n.last=a,t._audios[i]=n,u.playOneShot(o),u.once("ended",(function(){}))}}))}}},o._playClip=function(i,s,o){void 0===o&&(o=-1);var t=this._audios[i];-1===o&&(o=this._musicVolume,s||(o=this._soundVolume));var u=t.clip;u.setVolume(o),u.setLoop(t.loop),u.play()},o.stop=function(i){this._audios.hasOwnProperty(i)&&this._audios[i].clip.stop()},o.stopAll=function(){for(var i in this._audios){if(this._audios.hasOwnProperty(i))this._audios[i].clip.stop()}},o._setMusicVolume=function(i){for(var s in this._musicVolume=i,this._audios){if(this._audios.hasOwnProperty(s)&&this._audios[s].isMusic)this._audios[s].clip.setVolume(this._musicVolume)}},o.getMusicVolume=function(){return this._musicVolume},o.getSoundVolume=function(){return this._soundVolume},o.pauseAll=function(){for(var i in console.log("pause all music!!!"),this._audios){if(this._audios.hasOwnProperty(i))this._audios[i].clip.pause()}},o.resumeAll=function(){for(var i in this._audios){if(this._audios.hasOwnProperty(i))this._audios[i].clip.play()}},o.openMusic=function(){this._setMusicVolume(1),e.setLocalJson("setting","music","1")},o.closeMusic=function(){this._setMusicVolume(0),e.setLocalJson("setting","music","2")},o.openSound=function(){this._setSoundVolume(1),e.setLocalJson("setting","sound","1")},o.closeSound=function(){this._setSoundVolume(0),e.setLocalJson("setting","sound","2")},o._setSoundVolume=function(i){for(var s in this._soundVolume=i,this._audios){if(this._audios.hasOwnProperty(s)&&!this._audios[s].isMusic)this._audios[s].clip.setVolume(this._soundVolume)}for(var o=0;o<this._arrSound.length;o++){this._arrSound[o].clip.setVolume(this._soundVolume)}},o.stopSound=function(i){this._audios.hasOwnProperty(i)&&!this._audios[i].isMusic&&this._audios[i].clip.stop()},o.checkAndPlayBgMusic=function(i){var s=this.getAudioSetting(!0);i&&s&&this.playMusic(i,!0)},s(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i,this._instance.init()),this._instance}}]),i}())._instance=void 0,a=c))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/cnnPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./pet.ts","./uiManager.ts","./gmm.ts","./wee.ts","./go.mjs_cjs=&original=.js","./go.js"],(function(e){"use strict";var n,t,i,o,a,s,r,c,l,u,p,h,f,b,g,v;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){s=e.cclegacy,r=e._decorator,c=e.Node,l=e.LabelComponent,u=e.Component},function(e){p=e.AudioManager},function(e){h=e.pet},function(e){f=e.uiManager},function(e){b=e.gmm},function(e){g=e.wee},null,function(e){v=e.default}],execute:function(){var d,m,T,w,L,_,P,y,N,S,x,k,B,C;s._RF.push({},"46241DnCFtEa7eU0q9eHdRg","cnnPanel",void 0);var z=r.ccclass,A=r.property;e("cnnPanel",(d=z("cnnPanel"),m=A(c),T=A(c),w=A(c),L=A(c),_=A(l),d(((C=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,i(n,"ndLevel",N,o(n)),i(n,"ndBg",S,o(n)),i(n,"ndPause",x,o(n)),i(n,"ndOther",k,o(n)),i(n,"lbScore",B,o(n)),n.levelTokenNum=0,n.startPoint=null,n.bboxTipNum=0,n}t(n,e);var s=n.prototype;return s.show=function(){this.bboxTipNum=v.gnum(v.getLocalJson("help","bboxNum"))},s.showBboxTip=function(){return this.bboxTipNum<2&&(f.instance.showTips("《宝箱》打开后获得1-4张技能道具奖励","tip",3e3),v.setLocalJson("help","bboxNum",++this.bboxTipNum),!0)},s.resetUI=function(){this.showScore(),this.setPauseState(!0),this.showCurLevel()},s.onTapSetting=function(){this._preTab(),f.instance.showDialog(h.panelPath.SETTING_PANEL)},s.onTapRank=function(){if(this._preTab(),"wx"!=v.getPlat())return f.instance.showTips("请在微信中使用此功能~"),!1;var e=v.getLocalJson("auth","friend");if(!e||2==e)return g.isShowRank=!0,void f.instance.showDialog(h.panelPath.AUTH_PANEL);f.instance.showDialog(h.panelPath.RANK_PANEL)},s.onBtnRestart=function(){},s.showScore=function(){var e=b.player.info.score;this.lbScore.string="得分: "+e},s.showCurLevel=function(){var e=b.level;this.ndLevel.getComponent("cc.Label").string="第 "+e+" 关"},s.setPauseState=function(e){void 0===e&&(e=!1),this.ndPause.active=!0,e?(this.ndOther.active=!1,this.ndBg.active=!1):(this.ndOther.active=!0,this.ndBg.active=!0,f.instance.fitScreen(this.ndBg))},s.pauseGame=function(){this._preTab(),b.instance.pauseGame()},s.keepOn=function(){h.isTest?(this._preTab(),b.instance.keepOn()):console.log("is off..")},s.nextLevel=function(){h.isTest?(console.log("is test.."),this._preTab(),b.instance.nextLevel()):this._nextLevelByToken()},s.reStartGame=function(){console.log("reStartGame..."),this._preTab(),b.instance.reStartGame()},s._nextLevelByToken=function(){var e=this;e.levelTokenNum++,e.levelTokenNum>2&&b.instance.nextLevel(),e.scheduleOnce((function(){e.levelTokenNum=0}),.5)},s.testBug=function(){b.instance.testBug()},s._preTab=function(){p.instance.playSound(h.musicList.CLICK)},a(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}(u))._instance=void 0,N=n((y=C).prototype,"ndLevel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(y.prototype,"ndBg",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(y.prototype,"ndPause",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(y.prototype,"ndOther",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(y.prototype,"lbScore",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=y))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./uiManager.ts","./gmm.ts","./pet.ts","./go.mjs_cjs=&original=.js","./go.js"],(function(n){"use strict";var e,t,i,o,a,s,c,r,l,f,u,d,p,g,v,m,h,C,w,y,A,N,P,_,b;return{setters:[function(n){e=n.inheritsLoose,t=n.createForOfIteratorHelperLoose,i=n.createClass},function(n){o=n.cclegacy,a=n._decorator,s=n.UIOpacity,c=n.tween,r=n.RigidBody2D,l=n.Collider2D,f=n.instantiate,u=n.Vec2,d=n.Vec3,p=n.ParticleSystem2D,g=n.Sprite,v=n.Color,m=n.Label,h=n.Node,C=n.Size,w=n.find,y=n.Component},function(n){A=n.AudioManager},function(n){N=n.uiManager},function(n){P=n.gmm},function(n){_=n.pet},null,function(n){b=n.default}],execute:function(){var B,E;o._RF.push({},"d55e8wKC1dBMa8lFb1eDIFl","effectManager",void 0);var T=a.ccclass;a.property,n("EffectManager",T("EffectManager")(((E=function(n){function o(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))||this)._ndParent=null,e._effTime={},e._effHandle={},e._GCdata={},e}e(o,n);var a=o.prototype;return a.isEffTooMany=function(n,e){void 0===e&&(e=100);var t=this._effTime[n],i=Date.now();return i-t<e||(this._effTime[n]=i,!1)},a.ndBlinkOut=function(n,e,t,i){if(void 0===t&&(t=0),n){var o=n.getComponent(s);c(o).delay(.3*t).to(.2,{opacity:255},{easing:"smooth"}).to(.1,{opacity:0},{easing:"smooth"}).union().repeat(3).call((function(){e&&e()})).start()}else console.log("ERR:ndBlinkOut node not found..")},a.selectAni=function(n,e){for(var i,o=t(n.children.slice());!(i=o()).done;){var a=i.value;"selectEff"===a.name&&P.putPool(a)}var s=n.getComponent(r);if(!e.v){var c=s.linearVelocity;e.v=c}s.group=_.colliderGroups.NOCD,n.getComponent(l).group=_.colliderGroups.NOCD,s.sleep(),P.instance.getNode("selectEff",(function(e){f(e).parent=n}),"prefab/effect")},a.unSelectAni=function(n,e){console.log("[unSelectAni]..");var i=n.getComponent(r),o=n.getComponent(l);1===e.cdType?(i.group=_.colliderGroups.DEFAULT,o.group=_.colliderGroups.DEFAULT):(i.group=_.colliderGroups.CARD,o.group=_.colliderGroups.CARD),i.wakeUp(),e.v&&(i.linearVelocity=new u(e.v.x,e.v.y));for(var a,s=t(n.children.slice());!(a=s()).done;){var c=a.value;"selectEff"===c.name&&P.putPool(c)}},a.blinkAni=function(){var n=this;console.log("[blinkAni].."),P.warn.isWarn=!0,P.instance.getNode("blinkEff",(function(e){var t=f(e);t.parent=P.instance.ndCardEff,A.instance.playMusic(_.musicList.WARNING,!0);var i=t.getComponent(s);n._GCdata.blinkAni=!0,c(i).tag(34).delay(.2).to(.1,{opacity:0}).to(.1,{opacity:255}).union().repeat(10).call((function(){n._GCdata.blinkAni=!1,P.putPool(t),A.instance.stop(_.musicList.WARNING)})).start()}),"prefab/effect")},a.clearGC=function(){for(var n in this._GCdata)if(this._GCdata[n])switch(n){case"blinkAni":A.instance.stop(_.musicList.WARNING)}},a.screenShakeAni=function(){console.log("[screenShakeAni]..");for(var n=P.instance.fnode("Camera"),e=0;e<60;e++)setTimeout((function(){c(n).to(.05,{position:new d(b.rangeRandom(-7,7),b.rangeRandom(-7,7),0)},{easing:"smooth"}).call((function(){n.setPosition(new d(0,0,0))})).start()}),50*e)},a.stoneAni=function(){var n=this;console.log("[stoneAni].."),A.instance.playSound(_.musicList.STONE),this.screenShakeAni(),P.instance.getNode("stoneEff",(function(n){n.parent=P.instance.ndEffect;for(var e,i=n.getComponentsInChildren(p),o=t(i);!(e=o()).done;){var a=e.value;a.enabled=!0,a.resetSystem()}}),"prefab/effect"),P.instance.getNode("stone",(function(e){var t=f(e);t.parent=P.instance.ndTmpBox;var i=P.instance.skill.stoneDuTime;n.kitBtnAni(P.instance.ndKitStone,i,(function(){P.putPool(t),P.instance.skill.stoneState=0,P.isStopPine=!1,P.instance._clearPipeCards()})),t.setPosition(new d(297,1e3,0)),c(t).to(1,{position:new d(297,-175,0)},{easing:"sineIn"}).call((function(){})).start()}))},a.timeAni=function(n){var e=this;console.log("[timeAni].."),P.instance.getNode("kitHoleEff",(function(i){var o=f(i);o.parent=P.instance.ndCommon,A.instance.playMusic(_.musicList.HOLE,!0),o.setPosition(new d(0,550,0));var a=o.getChildByName("hole");c(a).tag(32).by(6,{eulerAngles:new d(0,0,360)}).repeatForever().start();for(var s,r=o.getComponentsInChildren(p),l=t(r);!(s=l()).done;){var u=s.value;u.enabled=!0,u.resetSystem()}e.kitBtnAni(P.instance.ndKitTime,n,(function(){cc.Tween.stopAllByTag(32),P.putPool(o),P.instance.skill.timeState=0,P.isStopPine=!1,P.instance._clearPipeCards(),A.instance.stop(_.musicList.HOLE)}))}),"prefab/effect")},a.iceAni=function(){var n=this;console.log("[iceAni].."),P.instance.getNode("snowEff",(function(e){var i=f(e);i.parent=P.instance.ndTmpBox;for(var o,a=i.getComponentsInChildren(p),s=t(a);!(o=s()).done;){var r=o.value;r.enabled=!0,r.resetSystem()}A.instance.playMusic(_.musicList.WIND,!0),P.instance.changeCardSpeed(1);var l=P.instance.ndPond.getChildByName("bg").getComponent(g);l.color=new v(26,179,238,255);var u=null;P.instance.getNode("iceEff",(function(n){(u=f(n)).parent=P.instance.ndPond,A.instance.playSound(_.musicList.ICE),u.setScale(new d(.3,.3,1)),c(u).to(.3,{scale:new d(.5,.5,1)},{easing:"quadIn"}).delay(.5).to(.3,{scale:new d(1,1,1)},{easing:"quadIn"}).call((function(){A.instance.playSound(_.musicList.ICE)})).start()}),"prefab/effect");var m=P.instance.skill.iceDuTime;n.kitBtnAni(P.instance.ndKitIce,m,(function(){P.putPool(i),P.putPool(u),P.instance.skill.iceState=0,l.color=new v(151,233,19,255),A.instance.stop(_.musicList.WIND),P.instance.changeCardSpeed(0),P.isStopPine=!1,P.instance._clearPipeCards()}))}),"prefab/effect")},a.blastAni=function(n){console.log("[blastAni].."),this.kitBtnAni(P.instance.ndKitBlast,n,(function(){}))},a.warnAni=function(n){var e=this;console.log("[warnAni].."),P.instance.getNode("warn",(function(t){P.warn.ndBg||(t.parent=P.instance.ndCommon,P.warn.ndBg=t.getChildByName("bg"),P.warn.spBg=t.getChildByName("bg").getComponent(g),P.warn.lbNum=t.getChildByName("num").getComponent(m),t.on(h.EventType.TOUCH_END,(function(n){P.showText("《警报器》\n用来实时监控糖果是否爆满",t.worldPosition,24,new v(255,255,255,255))}),e)),P.level>1&&(t.getChildByPath("bg/warnWord").active=!1),c(P.warn.ndBg).tag(33).by(10,{eulerAngles:new d(0,0,360)}).repeatForever().start(),n()}))},a.kitBtnAni=function(n,e,t){var i=this;console.log("[kitBtnAni].."),n?P.instance.getNode("skillingEff",(function(o){var a=f(o);a.parent=n;var s=n.getChildByName("num");s.active=!1;var r=a.getChildByName("ray");c(r).tag(31).by(3,{eulerAngles:new d(0,0,360)}).repeatForever().start();var l=a.getChildByName("fire");c(l).tag(31).by(6,{eulerAngles:new d(0,0,360)}).repeatForever().start();var u={stone:"1",time:"2",ice:"3",blast:"4"};u[n.name]&&P.instance.loadSprite(l,"images/kit/icon_fire"+u[n.name]);var p=a.getChildByName("num"),g=p.getComponent(m),v=e;g.string=v+"",p.active=!0,i._effHandle[n.name]=setInterval((function(){(v<=0||P.player.isOver)&&(v=0,clearInterval(i._effHandle[n.name]),cc.Tween.stopAllByTag(31),P.putPool(a),s.active=!0,t&&t()),g.string=v+"",v--}),1e3)}),"prefab/effect"):console.log("[kitBtnAni]no node..")},a.lightningAni=function(n,e,t){void 0===t&&(t=.6);var i=P.instance.ndMap,o=P.instance.ndCardEff;A.instance.playSound(_.musicList.LIGHTNING),P.instance.getNode("lightningEff",(function(a){for(var s=f(a),c=[],r=[],l=0;l<n.length;l++){var u=n[l],p=i.getChildByName(u.id);if(!p)return console.log("[lightningAni]err:node not found",u.id),void e(r);c.push(p)}for(var g=0;g<c.length;g++){var v,m,h=g+1;2===g&&(h=0),v=c[g].position,m=c[h].position;var w=b.getDistance(v,m),y=f(s);y.position=new d(v.x,v.y,0),y.angle=b.getAngle(v,m),y.getComponent("cc.UITransform").setContentSize(new C(w,34)),y.parent=o,r.push(y)}setTimeout((function(){e(r)}),1e3*t)}),"prefab/effect")},a.hitAni=function(n,e){void 0===e&&(e=null),P.instance.getNode("hitEff",(function(i){var o=f(i);o.parent=P.instance.ndMap;var a=e||n.worldPosition;o.worldPosition=new d(a.x,a.y,0);for(var s,c=o.getComponentsInChildren(p),r=t(c);!(s=r()).done;){var l=s.value;l.enabled=!0,l.resetSystem()}P.hitEffNum++,setTimeout((function(){P.hitEffNum--}),1e3)}),"prefab/effect")},a.countdown=function(n){var e=this;void 0===n&&(n=0);var t=this;console.log("[countdown].."),P.instance.getNode("countdown",(function(i){i.parent=P.instance.ndCommon;var o=i.getChildByName("clock").getComponent(m),a=300;n<3?a+=5*n*60:n>=3&&(a+=600);e._effHandle.countdown=setInterval((function(){a--,function(){var n=Math.floor(a/60),e=a%60,i=n<10?"0"+n:""+n,s=e<10?"0"+e:""+e;if(o.string=i+":"+s,a<=0)t.stopCountdown(),N.instance.showDialog(_.panelPath.OPENBOX_PANEL)}()}),1e3),0===n&&i.on(h.EventType.TOUCH_END,(function(n){P.showText("《宝箱》\n打开后获得1-4张技能道具奖励",i.worldPosition,24,new v(255,255,255,255))}),e)}))},a.stopCountdown=function(){clearInterval(this._effHandle.countdown)},a.newTeach=function(){this._effHandle.newTeach=setInterval((function(){P.showText("提示：点击3个相同的糖果\n消灭他们",P.instance.ndMap.worldPosition,34,new v(255,98,34,255),4)}),6e3)},a.stopNewTeach=function(){clearInterval(this._effHandle.newTeach)},i(o,[{key:"ndParent",get:function(){return this._ndParent||(this._ndParent=w("Canvas/effect")),this._ndParent}}],[{key:"instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}(y))._instance=void 0,B=E))||B);o._RF.pop()}}}));

System.register("chunks:///_virtual/gainToolPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./uiManager.ts","./gmm.ts","./pet.ts","./ad.ts","./go.mjs_cjs=&original=.js","./config.mjs_cjs=&original=.js","./config.js","./go.js"],(function(n){"use strict";var e,t,i,o,l,a,r,c,s,u,g,f,d,p,m,h,b,T,y;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized,l=n.createForOfIteratorHelperLoose},function(n){a=n.cclegacy,r=n._decorator,c=n.Node,s=n.LabelComponent,u=n.tween,g=n.Vec3,f=n.Component},function(n){d=n.AudioManager},function(n){p=n.uiManager},function(n){m=n.gmm},function(n){h=n.pet},function(n){b=n.ad},null,null,function(n){T=n.default},function(n){y=n.default}],execute:function(){var v,N,w,B,_,k,P,A,I,L,O,D,j;a._RF.push({},"3c2862Dtz9Ov5Irha+70C4g","gainToolPanel",void 0);var C=r.ccclass,S=r.property;n("gainToolPanel",(v=C("gainToolPanel"),N=S(c),w=S(s),B=S(c),_=S(s),k=S(c),v((I=e((A=function(n){function e(){for(var e,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return e=n.call.apply(n,[this].concat(l))||this,i(e,"ndBg",I,o(e)),i(e,"lbTitle",L,o(e)),i(e,"ndIcon",O,o(e)),i(e,"lbNote",D,o(e)),i(e,"ndBtnOk",j,o(e)),e}t(e,n);var a=e.prototype;return a.show=function(){var n=T.tool.items[m.curToolType];if(p.instance.fitScreen(this.ndBg),n){m.isStart=!1,this.lbTitle.string="获取"+n.title+"道具",m.instance.loadSprite(this.ndIcon,"images/kit/"+n.icon),this.lbNote.string=n.note;for(var e,t=l(this.ndBtnOk.children);!(e=t()).done;){e.value.active=!1}this.ndBtnOk.getChildByName("inner"+m.gway).active=!0,this.toolImgAni()}},a.onBtnCloseClick=function(){this._preTab(),m.isStart=!0,cc.Tween.stopAllByTag(50),p.instance.hideDialog(h.panelPath.GAINTOOL_PANEL)},a.closeDialog=function(){m.isStart=!0,cc.Tween.stopAllByTag(50),p.instance.hideDialog(h.panelPath.GAINTOOL_PANEL)},a.getToolNum=function(){var n=this;if("wx"!=y.getPlat())return this._doGetToolNum(),void n.closeDialog();if(2==m.gway){if(m.islock)return void console.log("locked..");m.islock=!0,b.instance.showVideo((function(e){1==e&&(n.closeDialog(),n._doGetToolNum()),d.instance.checkAndPlayBgMusic(h.musicList.BG)}))}else 1==m.gway&&(n.closeDialog(),b.instance.activeShare((function(){n.scheduleOnce((function(){n._doGetToolNum()}),.8)})))},a._doGetToolNum=function(){var n=m.curToolType;if({stone:"stoneNum",time:"timeNum",ice:"iceNum"}[n]){m.instance.skill[n+"Num"]+=1,m.instance.updateSkillNum();var e=m.instance.ndKitBox.getChildByName(n);e&&m.showText("+1",e.worldPosition)}},a.toolImgAni=function(){u(this.ndIcon).tag(50).by(10,{eulerAngles:new g(0,0,360)}).repeatForever().start()},a._preTab=function(){d.instance.playSound(h.musicList.CLICK)},e}(f)).prototype,"ndBg",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(A.prototype,"lbTitle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(A.prototype,"ndIcon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(A.prototype,"lbNote",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(A.prototype,"ndBtnOk",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=A))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/gameOverPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./uiManager.ts","./gmm.ts","./pet.ts"],(function(e){"use strict";var n,t,i,a,o,r,c,l,s,u,f,p,d,h,g,y,v;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,c=e._decorator,l=e.Node,s=e.LabelComponent,u=e.RichTextComponent,f=e.tween,p=e.Vec3,d=e.Component},function(e){h=e.AudioManager},function(e){g=e.uiManager},function(e){y=e.gmm},function(e){v=e.pet}],execute:function(){var b,m,w,B,S,F,L,R,T,P,C,z,_,x,A,N,k;r._RF.push({},"0364dX/d8tBHpGxDn8HGfRA","gameOverPanel",void 0);var I=c.ccclass,O=c.property;e("gameOverPanel",(b=I("gameOverPanel"),m=O(l),w=O(l),B=O(l),S=O(l),F=O(l),L=O(s),R=O(u),b((C=n((P=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,i(n,"ndBg",C,a(n)),i(n,"ndBgRay",z,a(n)),i(n,"ndSuccess",_,a(n)),i(n,"ndFail",x,a(n)),i(n,"ndTkBox",A,a(n)),i(n,"lbLife",N,a(n)),i(n,"lbScore",k,a(n)),n}t(n,e);var r=n.prototype;return r.show=function(e,n,t){var i=this;void 0===n&&(n=1),void 0===t&&(t=.2);var a=this;this.ndFail.active=!1,this.ndSuccess.active=!1,this.node.active=!1;var r=e?this.ndSuccess:this.ndFail;if(g.instance.fitScreen(this.ndBg),e)this.showBgRay();else{this.lbLife.string="x"+y.player.lifeNum;var c=this.ndFail.getChildByName("btnOk");if(c){for(var l,s=o(c.children);!(l=s()).done;){l.value.active=!1}var u=c.getChildByName("inner"+n);u&&(u.active=!0)}}setTimeout((function(){a.node.active=!0,r.active=!0,a.showScore(),g.nodeTween(i.ndTkBox,(function(){y.cnn.showBboxTip()}))}),1e3*t),y.cnn.ndPause&&(y.cnn.ndPause.active=!1)},r.showBgRay=function(){var e=this.ndBgRay;e&&(e.active=!0,f(e).tag(9).by(5,{eulerAngles:new p(0,0,360)}).repeat(10).call((function(){e.active=!1})).start())},r.stopBgRay=function(){this.ndBgRay&&cc.Tween.stopAllByTag(9)},r.onBtnRestart=function(){this._close(),y.instance.reStartGame()},r.onNextLevel=function(){this._close(),y.instance.nextLevel()},r.onShare=function(){h.instance.playSound(v.musicList.CLICK),y.player.share()},r.onTapRank=function(){y.cnn.onTapRank()},r.onTapSetting=function(){this._preTab(),g.instance.showDialog(v.panelPath.SETTING_PANEL)},r.onBtnClose=function(){this._close(),y.isWin?y.instance.nextLevel():y.instance.reStartGame(),y.cnn.ndPause&&(y.cnn.ndPause.active=!0),this.stopBgRay()},r.onRelife=function(){h.instance.playSound(v.musicList.CLICK),y.player.relife(y.player.gway),y.cnn.ndPause&&(y.cnn.ndPause.active=!0)},r._close=function(){h.instance.playSound(v.musicList.CLICK),g.instance.hideDialog(v.panelPath.GAMEOVER_PANEL)},r._preTab=function(){h.instance.playSound(v.musicList.CLICK)},r.showScore=function(){var e="<color=#00ee5f><outline color=#FFFFFF width=1>本局得分: <size=40>"+y.player.info.score+"</size></outline></color><br/><color=#66e0ff><outline color=#FFFFFF width=1>历史最高: <size=40><color=#ff0000>"+y.player.historyScore+"</color></size></outline></color>";this.lbScore.string=e},n}(d)).prototype,"ndBg",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(P.prototype,"ndBgRay",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(P.prototype,"ndSuccess",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(P.prototype,"ndFail",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(P.prototype,"ndTkBox",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(P.prototype,"lbLife",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(P.prototype,"lbScore",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=P))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/gmm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./uiManager.ts","./gmmBase.ts","./effectManager.ts","./pet.ts","./go.mjs_cjs=&original=.js","./config.mjs_cjs=&original=.js","./ad.ts","./go.js","./config.js"],(function(e){"use strict";var t,i,n,a,o,s,l,r,c,u,d,f,p,m,h,v,g,k,S,y,C,w,N,b,T,B,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,s=e.createClass},function(e){l=e.cclegacy,r=e._decorator,c=e.Node,u=e.Vec3,d=e.Collider2D,f=e.instantiate,p=e.Contact2DType,m=e.RigidBody2D,h=e.Vec2,v=e.tween,g=e.Color,k=e.ParticleSystem2D,S=e.resources},function(e){y=e.AudioManager},function(e){C=e.uiManager},function(e){w=e.gmmBase},function(e){N=e.EffectManager},function(e){b=e.pet},null,null,function(e){T=e.ad},function(e){B=e.default},function(e){P=e.default}],execute:function(){var _,L,A,M,x,I,D,R,F,G,E,K,z,W,O,q,H,j,U,V,Q,J,X,Y,Z,$,ee,te,ie,ne,ae,oe;l._RF.push({},"b7955Mnfi1H2b+2QvctGMPB","gmm",void 0);var se=r.ccclass,le=r.property;e("gmm",(_=se("gmm"),L=le(c),A=le(c),M=le(c),x=le(c),I=le(c),D=le(c),R=le(c),F=le(c),G=le(c),E=le(c),K=le(c),z=le(c),W=le(c),O=le(c),_(((oe=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"ndCanvas",j,a(t)),n(t,"ndCommon",U,a(t)),n(t,"ndMap",V,a(t)),n(t,"ndTmpBox",Q,a(t)),n(t,"ndEffect",J,a(t)),n(t,"ndCardEff",X,a(t)),n(t,"ndGame",Y,a(t)),n(t,"ndBg",Z,a(t)),n(t,"ndPond",$,a(t)),n(t,"ndKitBox",ee,a(t)),n(t,"ndKitStone",te,a(t)),n(t,"ndKitTime",ie,a(t)),n(t,"ndKitIce",ne,a(t)),n(t,"ndKitBlast",ae,a(t)),t.loadedNum=0,t.queue=[],t.same3Cards=[],t.ndBlast=null,t.arrParticle=[],t.isLoadCache=!1,t.lvCardNum=0,t.lvClearNum=0,t.moveNum=0,t.incomeNum=0,t.curCard=null,t.skill={fullPoint:60,lbNum:null,numBgSf:null,state:0,point:0,stoneLv:1,timeLv:2,iceLv:3,blastLv:0,stoneNum:1,timeNum:1,iceNum:1,lvTimeNum:2,blastAddRate:0,stoneDuTime:20,timeDuTime:10,iceDuTime:30,blastDuTime:30,stoneState:0,timeState:0,iceState:0},t}i(t,e);var l=t.prototype;return l.onLoad=function(){b.isTest||(console.log=function(){},console.warn=function(){}),console.log("gmm onLoad.."),t._instance=this,this.platformSet()},l.start=function(){var e=this;console.log("gmm start.."),this.initData((function(){e.initGame()}))},l.nextLevel=function(){t.islock?console.log("is locked.."):(t.islock=!0,t.level=t.level+1,t.isStart=!1,t.isWin=!1,t.level>b.maxLevel&&(t.level=b.maxLevel),this.initGame())},l.keepOn=function(){t.islock?console.log("is locked.."):(t.islock=!0,t.isStart=!1,t.isWin=!1,this.initGame())},l.reStartGame=function(){t.islock?console.log("is locked.."):(t.islock=!0,t.isStart=!1,t.isWin=!1,t.level=1,this.initGame())},l.initGame=function(){this._resetScene(),this._loadMap()},l._setLvParam=function(e){var i=[],n=[],a=[],o=[],s=[];if(e<3?(i=[2,2],n=[2/e,2/e],o=[.18,.18],a=[8,25],s=[6*e,6*e]):e>=3&&e<10?(i=[2,3],n=[1,1.5],o=[.15,.15],a=[10,30],s=[e+9,e+12]):e>=10&&e<20?(i=[3,4],n=[1,1.5],o=[.1,.15],a=[12,35],s=[e+9,e+12]):e>=20&&e<50?(i=[4,5],n=[.5,1],o=[.08,.1],a=[12,40],s=[e+3,e+6]):e>=50&&(i=[5,6],n=[.3,.5],o=[.06,.08],a=[15,40],s=[e-10,e]),e%5==0){var l=Math.max.apply(Math,i),r=Math.min.apply(Math,n),c=Math.min.apply(Math,o),u=Math.max.apply(Math,s);i=[l,l],n=[r,r],o=[c,c],s=[u,u]}t.maxMvNum=B.getRandom.apply(B,i),t.mvgap=B.getRandom.apply(B,n),t.pipeSpeed=B.getRandom.apply(B,o),t.mvSpeed=a,t.initNum=B.getRandom.apply(B,s)},l._getSameCardNum=function(e){var t=[];if(e<3?t=[e+2,e+2]:e>=3&&e<10?t=[4,5]:e>=10&&e<20?t=[5,6]:e>=20&&e<50?t=[6,7]:e>=50&&(t=[8,12]),e%5==0){var i=Math.max.apply(Math,t),n=1;e<=10?n=1:e>10&&e<=20?n=2:e>20&&(n=3),t=[i+n,i+n]}return 3*B.getRandom(t[0],t[1])},l._getIconPool=function(e){var t=[],i=P.icons,n=[];if(e<3?t=i.slice(0,Math.pow(e+1,2)):e>=3&&e<10?n=[6,7]:e>=10&&e<20?n=[8,9]:e>=20&&(n=[9,10]),e>=3){if(e%5==0){var a=Math.max.apply(Math,n),o=1;e<=10?o=1:e>10&&e<=20?o=2:e>20&&(o=3),n=[a+o,a+o]}t=B.randomArr(i,B.getRandom(n[0],n[1]))}return t},l._getCardsData=function(e){for(var t,i=[],n=this._getSameCardNum(e),a=this._getIconPool(e),s=o(a);!(t=s()).done;)for(var l=t.value,r=0;r<n;r++)i.push({isCover:!1,state:-2,icon:l,id:B.randomString(5),x:-1e3,y:0,kit:0,v:null,cdType:0});return i},l._loadMap=function(){var e=this,i=this._getCardsData(t.level);this._shuffleCards(i),this._setLvParam(t.level),t.cards=i,this.lvCardNum=i.length,this._initPondCards(),t.isFirst&&(t.player=this.ndGame.getComponent("player"),C.instance.showDialog(b.panelPath.CNN_PANEL,[!0],(function(e){t.cnn=e,y.instance.playMusic(b.musicList.BG,!0),N.instance.countdown(),N.instance.newTeach()}))),t.player.initPlayer(),N.instance.warnAni((function(){e.warnCheck()})),t.level%5==0&&C.instance.showTips("难度升级!","warning",2500),t.islock=!1,t.isFirst=!1,t.isStart=!0},l._resetScene=function(){t.cards=[],this.queue=[],cc.Tween.stopAll(),t.pool&&t.pool.clear(),this.ndMap.destroyAllChildren(),this.ndTmpBox.destroyAllChildren(),this.ndCardEff.destroyAllChildren(),this.stopWinEffect(),N.instance.clearGC(),this.moveNum=0,this.incomeNum=0,t.isStopPine=!1,t.hitEffNum=0,this.lvClearNum=0,this.skill.lvTimeNum=2,t.warn.isWarn=!1,this._resetSkill(),this.skillBtnUnlockState(),B.destroyRandomPool()},l.platformSet=function(){this.fitScreen(this.ndBg),T.instance.passiveShare()},l._shuffleCards=function(e){B.shuffleArr(e)},l._initPondCards=function(){var e=this,i=this;if(t.initNum)for(var n,a=0,s=this.nodes.card,l=function(){var o=n.value;if(-2!==o.state)return"continue";if(a>=t.initNum)return"break";o.state=0;var l=f(s);l.name=o.id,l.setPosition(new u(B.rangeRandom(-200,200),B.rangeRandom(-200,200),0)),e.loadSprite(l,"images/map/"+o.icon),l.setScale(new u(1,1,1)),l.parent=i.ndMap,l.on(c.EventType.TOUCH_END,(function(e){i.tapCard(o.id,l)}),e);var r=l.getComponent(m);r.wakeUp();var d=B.rangeRandom.apply(B,t.mvSpeed),p=B.rangeRandom.apply(B,t.mvSpeed);d=1===B.getRandom(0,1)?d:-d,p=1===B.getRandom(0,1)?p:-p,r.applyLinearImpulseToCenter(new h(d,p),!0),a++},r=o(t.cards);!(n=r()).done;){var d=l();if("continue"!==d&&"break"===d)break}},l.moveByPipe=function(){var e=this,i=this;if(!t.isStopPine&&!(t.mvlock||this.moveNum>=t.maxMvNum||this.incomeNum===t.cards.length)){var n=t.pipeSpeed;if(1===this.skill.iceState){var a=t.reSpeed/3;n=B.fnum(n/a,2)}for(var s,l=new u(-376,-406,0),r=i.nodes.card,d=function(){var a=s.value;if(-2!==a.state)return"continue";a.state=-1;var o=f(r);o.name=a.id,o.setPosition(l),o.setScale(new u(.5,.5,1)),i.loadSprite(o,"images/map/"+a.icon+"p"),o.parent=i.ndMap;var d=o.getComponent(m);return d.sleep(),v(o).tag(8).to(n,{position:new u(-325,-380,0)}).to(n,{position:new u(-229,-447,0)}).to(n,{position:new u(-93,-383,0)}).to(n,{position:new u(4,-449,0)}).to(n,{position:new u(141,-380,0)}).to(n,{position:new u(243,-446,0)}).to(n,{position:new u(291,-402,0)}).to(n,{position:new u(296,-256,0)}).call((function(){if(!t.isStopPine){i.loadSprite(o,"images/map/"+a.icon),o.setScale(new u(1,1,1)),o.on(c.EventType.TOUCH_END,(function(e){i.tapCard(a.id,o)}),e),i._toCollider(a,o,d),d.wakeUp();var n=-B.rangeRandom.apply(B,t.mvSpeed),s=B.rangeRandom.apply(B,t.mvSpeed);d.applyLinearImpulseToCenter(new h(n,s),!0);var l=d.linearVelocity;a.v=l,1===i.skill.iceState&&(d.linearVelocity=new h(a.v.x*t.reSpeed,a.v.y*t.reSpeed)),a.state=0,i.moveNum--,i.incomeNum++,i.incomeNum%(t.maxMvNum+1)==0&&(t.mvlock=!0,setTimeout((function(){return t.mvlock=!1}),1e3*t.mvgap)),i.warnCheck()}})).start(),i.moveNum++,"break"},p=o(t.cards);!(s=p()).done;){var g=d();if("continue"!==g&&"break"===g)break}}},l._toCollider=function(e,t,i){var n=this;setTimeout((function(){var a=B.getChance(50);if(t&&t.parent){var o=t.getComponent(d);if(a)e.cdType=1,n.getNode("cardFrameEff",(function(e){f(e).parent=t}),"prefab/effect"),i.group=b.colliderGroups.DEFAULT,o.group=b.colliderGroups.DEFAULT,o.on(p.BEGIN_CONTACT,n.onHit,n);else i.group=b.colliderGroups.CARD,t.getComponent(d).group=b.colliderGroups.CARD}}),2e3)},l.onHit=function(e,i,n){if(t.isStart){var a=i.node.name,o=e.node.name,s=t.cards.find((function(e){return e.id===o}));if(s)if(1!==s.state){var l=n.getWorldManifold().points;if(t.hitEffNum<3&&l.length&&"wall"!==a){var r=l[0];N.instance.hitAni(e.node,r)}var c=e.node.getComponent(m),u=c.linearVelocity;(Math.abs(u.x)>5||Math.abs(u.y)>5)&&(console.log("[onHit]resetSpeed.."),c.linearVelocity=new h(.6*s.v.x,.6*s.v.y))}else n.disabled=!0}},l.pauseGame=function(){console.log("pauseGame.."),t.islock?console.log("gmm.islock.."):(t.islock=!0,t.isStart=!t.isStart,t.isStart?this._clearPipeCards():cc.Tween.stopAllByTag(8),t.cnn.setPauseState(t.isStart),t.islock=!1)},l.checkCover=function(){for(var e=this,i=t.cards.slice(),n=e.ndMap,a=0;a<i.length;a++){var o=i[a];if(0===o.state){o.isCover=!1;var s=n.getChildByName(o.id);if(s){var l=s.getPosition();o.x=l.x,o.y=l.y;for(var r=o.x,c=o.y,u=r+90,d=c+95,f=a+1;f<i.length;f++){var p=i[f];if(0===p.state){var m=p.x,h=p.y;if(!(h+85<=c||h>=d||m+80<=r||m>=u)){o.isCover=!0;break}}}o.isCover?e.loadSprite(s,"images/map/"+o.icon+"c"):e.loadSprite(s,"images/map/"+o.icon)}}}t.cards=i},l.tapCard=function(e,i){var n=this;if(t.isStart){var a=t.cards.find((function(t){return t.id===e}));if(a){if(1===a.state){a.state=0;var s=n.queue.findIndex((function(e){return e.id===a.id}));return-1!==s&&n.queue.splice(s,1),y.instance.playSound(b.musicList.TAP),void N.instance.unSelectAni(i,a)}if(!a.isCover&&0===a.state){if(2===this.skill.state||1===this.skill.timeState)return C.instance.showTips("稍等，正在释放技能"),void console.log("[tapCard] wait skilling..");y.instance.playSound(b.musicList.TAP),N.instance.selectAni(i,a),a.state=1,n.queue.push(a);var l=n.queue.filter((function(e){return e.icon===a.icon}));if(l.length&&(l=l.slice(0,3)),this._cancelDiffCard(a),3===l.length){n.same3Cards=l.slice(),n.queue=n.queue.filter((function(e){return-1===l.findIndex((function(t){return e.id===t.id}))}));for(var r,c=function(){var e=r.value,i=t.cards.find((function(t){return t.id===e.id}));i&&(i.state=2)},u=o(l);!(r=u()).done;)c();this._same3Act(l),this.lvClearNum+=3,this.skill.point+=3,this.changeSkillState(),this.warnCheck(),t.hasConnect||N.instance.stopNewTeach(),t.hasConnect=!0}this.lvClearNum===this.lvCardNum&&(t.player.roleState=b.playerStates.WIN)}}}else console.log("pausing..")},l._clearPipeCards=function(){for(var e,i=o(t.cards);!(e=i()).done;){var n=e.value;if(-1===n.state){n.state=-2;var a=this.ndMap.getChildByName(n.id);a&&t.putPool(a)}}this.moveNum=0},l._resetSkill=function(){1!==this.skill.state&&(this.ndKitBlast.setScale(new u(1,1,1)),this.skill.state=0,this.skill.point=0,this.changeSkillState())},l._getSkillPointRate=function(){var e=0;return this.lvCardNum<=0||(e=this.lvCardNum<2*this.skill.fullPoint?2*this.skill.point/this.lvCardNum:this.skill.point/this.skill.fullPoint,(e=B.fnum(e,100)+this.skill.blastAddRate)>1?e=1:e<0&&(e=0)),e},l.changeSkillState=function(){if(0===this.skill.state&&!(this.lvCardNum<=0)){var e=this.ndKitBlast;this.skill.lbNum||(this.skill.lbNum=e.getChildByPath("num/txt").getComponent("cc.Label"));var t=this._getSkillPointRate();if(t>=1)return this.skill.state=1,v(e).tag(88).to(.8,{scale:new u(1.15,1.15,1)}).to(.3,{scale:new u(.9,.9,1)}).union().repeat(3).call((function(){e.setScale(new u(1,1,1))})).start(),setTimeout((function(){e.setScale(new u(1,1,1))}),4e3),void(this.skill.lbNum.string="ok");var i=B.fnum(100*t,1);this.skill.lbNum.string=i+"%"}},l.skillBlast=function(){var e=this,i=this;if(t.curToolType="blast",this._checkSkill())if(0!==this.skill.state)if(2!==this.skill.state){if(!t.cards.find((function(e){return 0===e.state})))return C.instance.showTips("无法暴击，池中暂时没东西"),void console.log("[uSkill]pond no card..");for(var n,a=[],s=t.cards.filter((function(e){return 0===e.state})),l=B.randomArr([9,12,15]).pop(),r={},c=o(s);!(n=c()).done;){var d=n.value;r[d.icon]=B.gnum(r[d.icon])+1}var f=function(e){if(r[e]<3)return"continue";if(a.length>=l)return"break";var t=s.filter((function(t){return t.icon===parseInt(e)})),i=0,n=3;l>s.length&&t.length>=6&&(n=6);for(var c,u=o(t);!(c=u()).done;){var d=c.value;if(i===n)break;a.push(d),i++}};for(var p in r){var m=f(p);if("continue"!==m&&"break"===m)break}if(a.length){this.skill.state=2,t.isStopPine=!0,cc.Tween.stopAllByTag(8),this.ndKitBlast.setScale(new u(1,1,1));for(var h=0,v=function(){var n=k[g],a=t.cards.find((function(e){return e.id===n.id}));a.state=2,e.lvClearNum++,setTimeout((function(){var t=i.ndMap.getChildByName(a.id);t?e._cardShake(t,(function(){var e=t.getPosition();y.instance.playSound(b.musicList.BLAST),i._showBlast(a,e.x,e.y)})):console.log("[uSkill] err3",t,a)}),300*h),h++},g=0,k=a;g<k.length;g++)v();this.skill.lbNum.string="0%",this.skill.point=0,this.skill.blastAddRate=0,N.instance.blastAni(B.fnum(.3*h)),setTimeout((function(){if(t.player.batchGainScore(a.length),!t.cards.find((function(e){return 2!==e.state})))return console.log("[uSkill] next.."),void(t.player.roleState=b.playerStates.WIN);2===e.skill.state&&(i.checkCover(),e.skill.state=0,e._clearPipeCards(),t.isStopPine=!1,e.warnCheck())}),300*h)}else C.instance.showTips("池中无三连卡牌，无法释放暴击技能")}else C.instance.showTips("正在暴击中");else{var S=this._getSkillPointRate(),w=B.fnum(100*S,1);C.instance.showTips("暴击充能中，完成"+w+"%")}},l.testBug=function(){for(var e,i=[],n=o(t.cards);!(e=n()).done;){var a=e.value;0===a.state&&i.push(a),0!==a.state&&2!==a.state&&console.log("[testBug]errcard:",a)}console.log("[testBug]pondCards:",i);for(var s=0,l=i;s<l.length;s++){var r=l[s],c=this.ndMap.getChildByName(r.id);console.log("[testBug]pondNode:",c),console.log("[testBug]pondNodePos:",c.position)}},l._checkSkill=function(){var e=this.skill[t.curToolType+"Lv"];return e&&t.level<=e?(C.instance.showTips("要过第"+e+"关才能解锁此技能"),!1):1===this.skill.stoneState?(C.instance.showTips("稍等，正在释放锤石技能"),!1):1===this.skill.timeState?(C.instance.showTips("稍等，正在释放时空转移技能"),!1):1===this.skill.iceState?(C.instance.showTips("稍等，正在释放玄冰技能"),!1):2!==this.skill.state||(C.instance.showTips("稍等，正在释放暴击技能"),!1)},l.skillBtnUnlockState=function(){for(var e,i=o(this.ndKitBox.children);!(e=i()).done;){var n=e.value,a=n.name,s=this.skill[a+"Lv"],l=n.getChildByName("num"),r=n.getChildByName("lock");if(!l||!r)return void console.log("[skillState]err:",l,r);if(!s)return void console.log("[skillState]err kitLowestLevel:",a);t.level<=s?(r.active=!0,l.active=!1):(r.active=!1,l.active=!0)}},l.skillStone=function(){if(t.curToolType="stone",this._checkSkill()){if(this.skill.stoneNum<=0)return t.gway=T.instance.getGway(),y.instance.playSound(b.musicList.CLICK),void C.instance.showDialog(b.panelPath.GAINTOOL_PANEL);t.isStopPine=!0,cc.Tween.stopAllByTag(8),this.skill.stoneState=1,this.skill.stoneNum--,N.instance.stoneAni(),this.updateSkillNum()}},l.skillTime=function(){var e=this,i=this;if(t.curToolType="time",this._checkSkill()){if(!t.cards.find((function(e){return 2!==e.state})))return C.instance.showTips("无法释放技能，池中暂时没东西"),void console.log("[uSkill]pond no card..");if(this.skill.timeNum<=0)return t.gway=T.instance.getGway(),y.instance.playSound(b.musicList.CLICK),void C.instance.showDialog(b.panelPath.GAINTOOL_PANEL);if(this.skill.lvTimeNum<=0)C.instance.showTips("每关最多释放2次时空转移技能");else{var n=[],a=t.cards.filter((function(e){return 0===e.state})),s=B.randomArr([12,15]).pop();console.log("[skillTime]blastNum:",s);for(var l,r={},c=o(a);!(l=c()).done;){var f=l.value;r[f.icon]=B.gnum(r[f.icon])+1}var p=function(e){if(r[e]<3)return"continue";if(n.length>=s)return"break";var t=a.filter((function(t){return t.icon===parseInt(e)})),i=0,l=3;s>a.length&&t.length>=6&&(l=6);for(var c,u=o(t);!(c=u()).done;){var d=c.value;if(i===l)break;n.push(d),i++}};for(var h in r){var g=p(h);if("continue"!==g&&"break"===g)break}if(n.length){this.skill.timeState=1,this.skill.timeNum--,this.skill.lvTimeNum--,this.updateSkillNum(),t.isStopPine=!0,cc.Tween.stopAllByTag(8);for(var k=0,S=function(){var n=P[w],a=t.cards.find((function(e){return e.id===n.id}));a.state=2,e.lvClearNum++,setTimeout((function(){var e=i.ndMap.getChildByName(a.id);if(e){a.isCover&&i.loadSprite(e,"images/map/"+a.icon);var n=e.getComponent(m);n.sleep(),n.group=b.colliderGroups.NOCD,e.getComponent(d).group=b.colliderGroups.NOCD,v(e).to(2,{position:new u(0,420,0),scale:new u(.1,.1,1),eulerAngles:new u(0,0,360)},{easing:"sineIn"}).call((function(){t.putPool(e),i.warnCheck()})).start()}else console.log("[skillTime] err",e,a)}),500*k),k++},w=0,P=n;w<P.length;w++)S();N.instance.timeAni(B.fnum(.5*(n.length-1)+2)),setTimeout((function(){if(t.player.batchGainScore(n.length),!t.cards.find((function(e){return 2!==e.state})))return console.log("[skillTime] next.."),void(t.player.roleState=b.playerStates.WIN)}),500*k)}else C.instance.showTips("池中无三连卡牌，无法释放时空转移技能")}}},l.skillIce=function(){if(t.curToolType="ice",this._checkSkill()){if(this.skill.iceNum<=0)return t.gway=T.instance.getGway(),y.instance.playSound(b.musicList.CLICK),void C.instance.showDialog(b.panelPath.GAINTOOL_PANEL);this.skill.iceState=1,this.skill.iceNum--,N.instance.iceAni(),this.updateSkillNum()}},l.warnCheck=function(){if(t.isStart&&t.warn.ndBg){var e=t.cards.length;if(e){for(var i,n=0,a=o(t.cards);!(i=a()).done;){0===i.value.state&&n++}var s=B.fnum(n/e*2,100),l=t.warn.spBg,r=t.warn.lbNum;l.color=r.color=s<.6?new g(151,233,19,255):s>=.6&&s<=.8?new g(255,200,64,255):new g(255,0,0,255),s>=.8&&(t.warn.isWarn||(C.instance.showTips("警报：糖果要爆满了，请尽快消灭！","warning",3e3),N.instance.blinkAni())),s>1&&(s=1,t.player.roleState=b.playerStates.FAIL),r.string=B.fnum(100*s)+"%"}}},l.changeCardSpeed=function(e){void 0===e&&(e=0),console.log("[changeCardSpeed]..");for(var i,n=t.reSpeed,a=o(t.cards);!(i=a()).done;){var s=i.value;if(0===s.state){var l=this.ndMap.getChildByName(s.id);if(l){var r=l.getComponent(m);if(!s.v){var c=r.linearVelocity;s.v=c}0===e?r.linearVelocity=new h(s.v.x,s.v.y):1===e&&(r.linearVelocity=new h(s.v.x*n,s.v.y*n))}}}},l.updateSkillNum=function(){switch(t.curToolType){case"stone":this.ndKitStone.getChildByPath("num/txt").getComponent("cc.Label").string=this.skill.stoneNum;break;case"time":this.ndKitTime.getChildByPath("num/txt").getComponent("cc.Label").string=this.skill.timeNum;break;case"ice":this.ndKitIce.getChildByPath("num/txt").getComponent("cc.Label").string=this.skill.iceNum}},l.batchUpdateSkillNum=function(){this.ndKitStone.getChildByPath("num/txt").getComponent("cc.Label").string=this.skill.stoneNum,this.ndKitTime.getChildByPath("num/txt").getComponent("cc.Label").string=this.skill.timeNum,this.ndKitIce.getChildByPath("num/txt").getComponent("cc.Label").string=this.skill.iceNum,this.changeSkillState()},l.showWinEffect=function(){this.showFireworks()},l.stopWinEffect=function(){this.stopFireworks()},l.showFireworks=function(e){void 0===e&&(e=!0);var i=this,n=this.nodes.fireworks;if(n){n.parent||(n.parent=this.ndCanvas),C.instance.fitScreen(n.getChildByName("bg")),e&&(y.instance.playMusic(b.musicList.HAIL,!0),y.instance.playMusic(b.musicList.FIREWORKS,!0,.7)),n.active=!0;for(var a,s=n.getComponentsInChildren(k),l=o(s);!(a=l()).done;){var r=a.value;r.enabled=!0,r.resetSystem()}t.isFireworks=!0,setTimeout((function(){i.stopFireworks()}),8e3)}},l.stopFireworks=function(){if(t.isFireworks){t.isFireworks=!1;var e=this.nodes.fireworks;if(e){y.instance.stop(b.musicList.HAIL),y.instance.stop(b.musicList.FIREWORKS),e.active=!1;for(var i,n=e.getComponentsInChildren(k),a=o(n);!(i=a()).done;){var s=i.value;s.enabled=!1,s.stopSystem()}}}},l._same3Act=function(e){var i=this,n=this.ndMap;N.instance.lightningAni(e,(function(a){for(var s,l=0,r=function(){var e=s.value,o=n.getChildByName(e.id);if(!o)return console.log("same3Cards node not fount！"),"continue";setTimeout((function(){i._cardShake(o,(function(){t.putAllPool(a);var n=o.getPosition();y.instance.playSound(b.musicList.BLAST),i._showBlast(e,n.x,n.y)}))}),300*l),l++},c=o(e);!(s=c()).done;)r();t.player.gainScore()}))},l._cardShake=function(e,i){e&&v(e).to(.1,{scale:new u(.8,.8,1)}).to(.07,{scale:new u(1,1.15,1)}).to(.15,{scale:new u(.3,.3,1)}).to(.1,{scale:new u(1,1.15,1)}).hide().call((function(){e&&t.putPool(e),i()})).start()},l._showBlast=function(e,i,n){var a=this,s=this;e?t.instance.getNode("blast",(function(t){a.ndBlast||(a.ndBlast=f(t),a.ndBlast.parent=a.ndEffect);var l=a.ndBlast;l.setPosition(new u(i,n,0)),s.getSprite("images/map/"+e.icon+"p",(function(e){s.arrParticle.length||(s.arrParticle=l.getComponentsInChildren(k));for(var t,i=o(s.arrParticle);!(t=i()).done;){var n=t.value;"img"===n.node.name&&(n.spriteFrame=e),n.enabled=!0,n.resetSystem()}}))}),"prefab/effect"):console.log("!card:",e)},l._cancelDiffCard=function(e){if(this.queue.length){var t=this.ndMap,i=this.queue.slice();i.find((function(t){return t.icon!==e.icon}))&&(this.queue=this.queue.filter((function(t){return t.icon===e.icon})));for(var n,a=o(i);!(n=a()).done;){var s=n.value;if(s.icon!==e.icon){var l=t.getChildByName(s.id);if(!l){console.log("node not fount3！");continue}N.instance.unSelectAni(l,s),s.state=0}}}},l.initData=function(e){var i=this,n=this,a=this._getIconPool(t.level),s=a.length,l=0;this.getNode("card",(function(){for(var t,i=function(){var i=t.value+"p";S.load("images/map/"+i+"/spriteFrame",(function(t,a){t||(n.cacheSF[i]=a),++l===s&&e()}))},r=o(a);!(t=r()).done;)i()}));for(var r,c=function(){var e=r.value;setTimeout((function(){S.load("images/map/"+e+"/spriteFrame",(function(t,i){t?console.log("initData err2:",t):n.cacheSF[e]=i}))}),200)},u=o(a);!(r=u()).done;)c();for(var d=function(){var e=p[f];setTimeout((function(){i.getNode(e,null,"prefab/effect")}),300)},f=0,p=["fireworks"];f<p.length;f++)d()},l.loadCache=function(){for(var e,t=this,i=o(P.icons);!(e=i()).done;)for(var n=e.value,a=function(){var e=l[s];if(t.cacheSF[e])return"continue";setTimeout((function(){S.load("images/map/"+e+"/spriteFrame",(function(i,n){i?console.log("resources load card err:",i):t.cacheSF[e]=n}))}),50)},s=0,l=[n,n+"c",n+"p"];s<l.length;s++)a();this.isLoadCache=!0},s(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}},{key:"isStart",get:function(){return this._isStart},set:function(e){this._isStart=e}}]),t}(w))._instance=void 0,oe.player=null,oe.cnn=null,oe._isStart=!1,oe.isWin=!1,oe.hitEffNum=0,oe.adLoaded=!0,oe.islock=!1,oe.taplock=!1,oe.isSign=!1,oe.level=1,oe.cards=[],oe.isFirst=!0,oe.hasConnect=!1,oe.maxMvNum=2,oe.mvlock=!1,oe.mvgap=5,oe.pipeSpeed=.1,oe.mvSpeed=[],oe.initNum=6,oe.v3Pos=new u,oe.isFireworks=!1,oe.isStopPine=!1,oe.curToolType="stone",oe.gway=1,oe.reSpeed=.3,oe.warn={ndBg:null,spBg:null,lbNum:null,isWarn:!1},j=t((H=oe).prototype,"ndCanvas",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(H.prototype,"ndCommon",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(H.prototype,"ndMap",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(H.prototype,"ndTmpBox",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(H.prototype,"ndEffect",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(H.prototype,"ndCardEff",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(H.prototype,"ndGame",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(H.prototype,"ndBg",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(H.prototype,"ndPond",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(H.prototype,"ndKitBox",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(H.prototype,"ndKitStone",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(H.prototype,"ndKitTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(H.prototype,"ndKitIce",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(H.prototype,"ndKitBlast",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=H))||q));l._RF.pop()}}}));

System.register("chunks:///_virtual/gmmBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./pet.ts","./go.mjs_cjs=&original=.js","./go.js"],(function(e){"use strict";var o,t,n,r,i,a,s,c,l,u,p,d,f,v,g,m,h,S,w,C;return{setters:[function(e){o=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e._decorator,i=e.NodePool,a=e.UIOpacity,s=e.tween,c=e.find,l=e.UITransform,u=e.Size,p=e.resources,d=e.instantiate,f=e.Sprite,v=e.Vec3,g=e.Color,m=e.Node,h=e.Label,S=e.Component},function(e){w=e.pet},null,function(e){C=e.default}],execute:function(){var F,y;n._RF.push({},"13da4kU9ilEHpcG1kqt91V/","gmmBase",void 0);var P=r.ccclass;r.property,e("gmmBase",P("gmmBase")(((y=function(e){function n(){for(var o,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(o=e.call.apply(e,[this].concat(n))||this).nodes={},o.cacheSF={},o}o(n,e),n.putPool=function(e){e&&n.pool.put(e)},n.putAllPool=function(e){if(e.length)for(var o,r=t(e);!(o=r()).done;){var i=o.value;n.pool.put(i)}},n.ndFadeOut=function(e,o){void 0===o&&(o=.5);var t=e.getComponent(a);t&&s(t).to(o,{opacity:0},{easing:"smooth"}).call((function(){n.putPool(e)})).start()},n.removeNode=function(e){void 0===e&&(e="");var o=c(e);o&&(o.parent=null)};var r=n.prototype;return r.fnode=function(e){return c("Canvas/"+e)},r.fitScreen=function(e){e&&e.getComponent(l).setContentSize(w.vsize)},r.fitNodesScreen=function(e,o){void 0===o&&(o=0);for(var n,r=w.vsize,i=t(e);!(n=i()).done;){var a=n.value;if(a){if(1===o){var s,c=null==(s=a.getComponent(l))?void 0:s.contentSize;r=new u(c.width,w.vsize.height)}a.getComponent(l).setContentSize(r)}}},r.getNode=function(e,o,t){void 0===t&&(t="prefab");var n=this,r=n.nodes[e];r?o&&o(r):p.load(t+"/"+e,(function(t,i){t?console.warn("getNode err:",t):(r=d(i),n.nodes[e]=r,o&&o(n.nodes[e]))}))},r.getSprite=function(e,o){var t=this,n=C.getPathName(e),r=this.cacheSF[n];r?o&&o(r):p.load(e+"/spriteFrame",(function(e,r){e||(t.cacheSF[n]=r,o&&o(r))}))},r.loadSprite=function(e,o,t){var n=this,r=C.getPathName(o);if(e){var i=e.getComponent(f);if(i){var a=n.cacheSF[r];if(a)return i.spriteFrame=a,void(t&&t(a));p.load(o+"/spriteFrame",(function(e,a){e?console.warn("[loadSprite]err: no sprite source",o):(i.spriteFrame=a,n.cacheSF[r]=a,t&&t(a))}))}}else console.log("loadSprite node err: ")},n.showText=function(e,o,t,r,i){void 0===e&&(e=""),void 0===o&&(o=new v(0,0,0)),void 0===t&&(t=30),void 0===r&&(r=new g(255,0,0,255)),void 0===i&&(i=2);var l=new m("text");l.parent=c("Canvas/map"),l.worldPosition=o;var u=l.addComponent(h);u.string=e,u.fontSize=t,u.color=r;var p=l.addComponent(a);s(l).to(i,{worldPosition:new v(o.x,o.y+150,0)},{easing:"sineOut"}).delay(.1).call((function(){return n.putPool(l)})).start(),s(p).to(i,{opacity:0},{easing:"sineIn"}).start()},n}(S)).pool=new i,F=y))||F);n._RF.pop()}}}));

System.register("chunks:///_virtual/openboxPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./uiManager.ts","./gmm.ts","./effectManager.ts","./pet.ts","./go.mjs_cjs=&original=.js","./config.mjs_cjs=&original=.js","./config.js","./go.js"],(function(e){"use strict";var n,t,o,i,r,a,l,c,s,u,d,p,g,f,m,h,b,w,y,v,x,B,P;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,c=e.Node,s=e.tween,u=e.Vec3,d=e.Color,p=e.Animation,g=e.Component,f=e.instantiate,m=e.Sprite,h=e.Label},function(e){b=e.AudioManager},function(e){w=e.uiManager},function(e){y=e.gmm},function(e){v=e.EffectManager},function(e){x=e.pet},null,null,function(e){B=e.default},function(e){P=e.default}],execute:function(){var z,C,A,O,N,k,M,L,S,j,R,T,_,I,D;a._RF.push({},"9177cjh6n1M1oMu61aghQaO","openboxPanel",void 0);var E=l.ccclass,F=l.property;e("openboxPanel",(z=E("openboxPanel"),C=F(c),A=F(c),O=F(c),N=F(c),k=F(c),M=F(c),z((j=n((S=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,o(n,"ndBg",j,i(n)),o(n,"ndRay",R,i(n)),o(n,"ndOpenbox",T,i(n)),o(n,"ndBox",_,i(n)),o(n,"ndOther",I,i(n)),o(n,"ndPrizeBox",D,i(n)),n.myprizes=[],n.openNum=0,n}t(n,e);var a=n.prototype;return a.show=function(){w.instance.fitScreen(this.ndBg),this.openboxAni()},a.openboxAni=function(){var e=this;y.isStopPine=!0,this.ndPrizeBox.destroyAllChildren(),this.ndPrizeBox.getComponent("cc.Layout").enabled=!1,this.myprizes=[],this.ndOther.active=!1,this.ndOpenbox.active=!0,y.instance.loadSprite(this.ndBox,"images/kit/bbox1");var n;this.openNum++,s(this.ndRay).tag(60).by(5,{eulerAngles:new u(0,0,360)}).repeatForever().start();var t=s(this.ndBox).to(.1,{scale:new u(1.2,1.2,1)}).to(.1,{scale:new u(1,1,1)}).delay(.1),o=s(this.ndBox).to(.1,{eulerAngles:new u(0,0,10)}).to(.2,{eulerAngles:new u(0,0,-10)}).to(.1,{eulerAngles:new u(0,0,0)}).delay(.3),i=s(this.ndBox).parallel(t,o),a=B.tool.items,l=[{id:1,kit:"stone",attr:"stoneNum",rate:.2,name:"锤石技能",icon:a.stone.icon,bgcolor:new d(250,31,167,255),notecolor:new d(0,255,235,255)},{id:2,kit:"time",attr:"timeNum",rate:.3,name:"时空技能",icon:a.time.icon,bgcolor:new d(220,156,49,255),notecolor:new d(255,0,0,255)},{id:3,kit:"ice",attr:"iceNum",rate:.4,name:"玄冰技能",icon:a.ice.icon,bgcolor:new d(93,253,234,255),notecolor:new d(252,81,0,255)},{id:4,kit:"blast",attr:"blastRate",rate:.5,name:"暴击+30%",icon:a.blast.icon,bgcolor:new d(243,93,23,255),notecolor:new d(232,252,0,255)}];this.myprizes=n=function(){for(var e,n=(e=Math.random())<.2?1:e<.6?2:e<.9?3:4,t=[],o=function(){var e=Math.floor(4*Math.random()),n=l[e];if(t.find((function(e){return e.id===n.id})))return"continue";Math.random()<n.rate&&t.push(n)};t.length<n;)o();return t}();var c=[],g=0;y.instance.getNode("prizeCard",(function(t){for(var o,a=function(){var i=o.value,a=f(t);a.parent=e.ndPrizeBox,a.scale=new u(0,0,0),a.position=new u(0,0,0),y.instance.loadSprite(a.getChildByName("icon"),"images/kit/"+i.icon),a.getChildByName("bgColor").getComponent(m).color=i.bgcolor;var l=a.getChildByName("note").getComponent(h);l.string=i.name,l.color=i.notecolor,e.ndPrizeBox.getComponent("cc.Layout").enabled=!1;var d=new u(P.rangeRandom(-200,200),P.rangeRandom(-200,200),0),p=s(a).to(.3,{scale:new u(1,1,1),position:d}).to(.3,{position:new u(0,400,0)}).call((function(){s(a).to(.3,{eulerAngles:new u(0,0,120)},{easing:"sineOut"}).to(.3,{eulerAngles:new u(0,0,240)},{easing:"sineIn"}).to(.3,{eulerAngles:new u(0,0,360)},{easing:"sineOut"}).delay(.5).call((function(){if(a.active=!1,++g>=n.length){e.ndPrizeBox.getComponent("cc.Layout").enabled=!0,cc.Tween.stopAllByTag(60),e.ndOpenbox.active=!1;for(var t,o=r(e.ndPrizeBox.children);!(t=o()).done;){t.value.active=!0}w.nodeTween(e.ndPrizeBox,(function(){e.ndOther.active=!0}))}})).start()}));c.push(p)},l=r(n);!(o=l()).done;)a();i.repeat(3).call((function(){e.ndBox.getComponent(p).play();for(var n=function(e){setTimeout((function(){b.instance.playSound(x.musicList.PRIZESHOW),c[e].start()}),2500*e)},t=0;t<c.length;t++)n(t)})).start()}))},a.onBtnCloseClick=function(){this._preTab(),w.instance.hideDialog(x.panelPath.OPENBOX_PANEL),y.isStopPine=!1;for(var e,n=r(this.myprizes);!(e=n()).done;){var t=e.value,o=y.instance.fnode("game/kit/"+t.kit);4!==t.id?(y.instance.skill[t.attr]++,o&&y.showText("+1",o.worldPosition)):(y.instance.skill.blastAddRate+=.3,o&&y.showText("+30%",o.worldPosition))}setTimeout((function(){y.instance.batchUpdateSkillNum()}),2e3),v.instance.countdown(this.openNum)},a._preTab=function(){b.instance.playSound(x.musicList.CLICK)},n}(g)).prototype,"ndBg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(S.prototype,"ndRay",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(S.prototype,"ndOpenbox",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(S.prototype,"ndBox",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(S.prototype,"ndOther",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(S.prototype,"ndPrizeBox",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=S))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/pet.ts",["cc"],(function(e){"use strict";var i,t;return{setters:[function(e){i=e.cclegacy,t=e.view}],execute:function(){i._RF.push({},"c5cc3n8e+NNkKAStyftnle4","pet",void 0);e("pet",{appName:"吃糖计划",customLevel:1,vsize:t.getVisibleSize(),gameSize:{width:750,height:1333},playerStates:{PAUSE:7,RUN:8,WIN:4,FAIL:5,KITING:9},game:{static:1},relife:{share:1,video:2},sign:{coin:5e3,zs:20},playerInfo:{lifeNum:2},colliderGroups:{DEFAULT:1,CARD:2,WALL:4,INNER:8,NOCD:16},panelPath:{SETTING_PANEL:"settingPanel",GAME_PANEL:"gamePanel",GAMEOVER_PANEL:"gameOverPanel",LOADING_PANEL:"loading",TIPS_PANEL:"minimsg",CNN_PANEL:"cnnPanel",SIGN_PANEL:"signPanel",RANK_PANEL:"rankPanel",AUTH_PANEL:"userAuth",GAINTOOL_PANEL:"gainToolPanel",OPENBOX_PANEL:"openboxPanel"},musicList:{BG:"bg",HAIL:"hail",FIREWORKS:"fireworks",STONE:"stone",HOLE:"hole",WIND:"wind",WARNING:"warning",SOUND_TIP:"sound_tip",GETFULL:"getfull",FAIL:"fail",CLICK:"click",TAP:"tap",BLAST:"blast",GETKIT:"getkit",SUCCESS:"success",ICE:"ice",LIGHTNING:"lightning",PRIZESHOW:"prizeshow"},isTest:!1,maxLevel:999999,initLevel:1});i._RF.pop()}}}));

System.register("chunks:///_virtual/player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./uiManager.ts","./gmm.ts","./pet.ts","./config.mjs_cjs=&original=.js","./go.mjs_cjs=&original=.js","./wee.ts","./ad.ts","./go.js","./config.js"],(function(e){"use strict";var t,i,n,s,a,o,c,r,l,u,f,h,g,d;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,s=e._decorator,a=e.director,o=e.Component},function(e){c=e.AudioManager},function(e){r=e.uiManager},function(e){l=e.gmm},function(e){u=e.pet},null,null,function(e){f=e.wee},function(e){h=e.ad},function(e){g=e.default},function(e){d=e.default}],execute:function(){var p;n._RF.push({},"ef4cef7JJlOy6OAvtav1F4M","player",void 0);var v=s.ccclass;s.property,e("player",v("player")(p=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).historyScore=0,t._roleState=null,t.isOver=!1,t.gway=0,t.lifeNum=0,t.info={score:0},t.kiting=0,t}t(n,e);var s=n.prototype;return s.update=function(e){var t=a.getTotalFrames();t%5==0&&l.instance.checkCover(),l.isStart&&t%30==0&&l.instance.moveByPipe()},s.initPlayer=function(){console.log("initPlayer.."),this.isOver=!1,this.lifeNum=u.playerInfo.lifeNum,this.roleState=u.playerStates.RUN,l.cnn&&l.cnn.resetUI()},s.gameIsOver=function(e){var t=this;if(console.log("gameIsOver.."),l.isStart=!1,l.isWin=e,this.isOver=!0,this.gway=h.instance.getGway(),console.log("[gameIsOver]this.gway:",this.gway),e){var i=g.fnum(this.info.score),n=g.getLocalJson("gres","score");this.historyScore=g.gnum(n),i>this.historyScore&&(g.setLocalJson("gres","score",i),this.setUserCloudData()),l.instance.showWinEffect(),l.instance.isLoadCache||l.instance.loadCache()}d.showAD&&h.instance.cpAdIsOk?h.instance.showADCP((function(){r.instance.showDialog(u.panelPath.GAMEOVER_PANEL,[e,t.gway])})):r.instance.showDialog(u.panelPath.GAMEOVER_PANEL,[e,this.gway]),h.instance.loadAD()},s.setUserCloudData=function(){"wx"==g.getPlat()&&f.setUserCloudStorage(this.info.score,l.level)},s.relife=function(e){void 0===e&&(e=2);var t=this;if(this.lifeNum<=0)r.instance.showTips("复活次数已用完");else{if("wx"!=g.getPlat())return t._doRelife(),void r.instance.hideDialog(u.panelPath.GAMEOVER_PANEL);if(2==e){if(l.islock)return void console.log("now is locked...");l.islock=!0,h.instance.showVideo((function(e){1==e&&(r.instance.hideDialog(u.panelPath.GAMEOVER_PANEL),t._doRelife()),c.instance.checkAndPlayBgMusic(u.musicList.BG)}))}else 1==e&&(r.instance.hideDialog(u.panelPath.GAMEOVER_PANEL),h.instance.activeShare((function(){t.scheduleOnce((function(){t._doRelife()}),.8)})))}},s._doRelife=function(){l.instance.keepOn(),this.lifeNum--,this.lifeNum<0&&(this.lifeNum=0)},s.setPlayerInfo=function(e){for(var t in e)this.info[t]=e[t]},s.gainScore=function(e,t){void 0===e&&(e=1),void 0===t&&(t=!0);var i=0;1===e&&(i=10),this.info.score+=i,t&&l.cnn.showScore()},s.batchGainScore=function(e,t){void 0===e&&(e=1),void 0===t&&(t=!0);var i=10*e;this.info.score+=i,t&&l.cnn.showScore()},s.share=function(e){h.instance.activeShare()},i(n,[{key:"roleState",get:function(){return this._roleState},set:function(e){switch(this._roleState=e,e){case u.playerStates.RUN:case u.playerStates.KITING:case u.playerStates.PAUSE:break;case u.playerStates.FAIL:c.instance.playSound(u.musicList.FAIL),this.gameIsOver(!1);break;case u.playerStates.WIN:this.gameIsOver(!0)}}}]),n}(o))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/rankPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./uiManager.ts","./pet.ts","./wee.ts"],(function(e){"use strict";var n,t,i,a,o,r,u,c,l,s,p,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,u=e.Node,c=e.Component},function(e){l=e.AudioManager},function(e){s=e.uiManager},function(e){p=e.pet},function(e){d=e.wee}],execute:function(){var f,b,g,h,w,C,y,v,x;o._RF.push({},"323adG8YiNNbbadCoqAMkO6","rankPanel",void 0);var S=r.ccclass,k=r.property;e("rankPanel",(f=S("rankPanel"),b=k(u),g=k(u),h=k(u),f((y=n((C=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,i(n,"ndBg",y,a(n)),i(n,"ndNote",v,a(n)),i(n,"ndSubContextView",x,a(n)),n}t(n,e);var o=n.prototype;return o.show=function(){var e=this;s.instance.fitScreen(this.ndBg);var n=this.ndSubContextView.getComponent("cc.SubContextView");n.enabled=!0,wx.getOpenDataContext().postMessage({renewRank:d.renewRank++}),this.scheduleOnce((function(){e.ndNote.active=!1,n.update()}),.8)},o.onBtnClose=function(){l.instance.playSound(p.musicList.CLICK),this.ndSubContextView.getComponent("cc.SubContextView").enabled=!1,s.instance.hideDialog(p.panelPath.RANK_PANEL)},n}(c)).prototype,"ndBg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(C.prototype,"ndNote",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(C.prototype,"ndSubContextView",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/resources",["./ad.ts","./config.mjs_cjs=&original=.js","./effectManager.ts","./audioManager.ts","./gmmBase.ts","./resourceUtil.ts","./uiManager.ts","./util.ts","./gmm.ts","./go.mjs_cjs=&original=.js","./pet.ts","./player.ts","./cnnPanel.ts","./gainToolPanel.ts","./gameOverPanel.ts","./openboxPanel.ts","./rankPanel.ts","./settingPanel.ts","./userAuth.ts","./wee.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){"use strict";var r,t,n,o,i,a,s,f,u,c;return{setters:[function(e){r=e.cclegacy,t=e._decorator,n=e.resources,o=e.error,i=e.Prefab,a=e.SpriteFrame,s=e.Texture2D,f=e.instantiate,u=e.find,c=e.isValid}],execute:function(){var l;r._RF.push({},"cd201dvpIBPapzDNlxp9ung","resourceUtil",void 0);var d=t.ccclass;e("resourceUtil",d("resourceUtil")(l=function(){function e(){}return e.loadRes=function(e,r,t){n.load(e,(function(e,r){if(e)return o(e.message||e),void t(e,r);t(null,r)}))},e.loadEffectRes=function(e){var r=this;return new Promise((function(t,n){r.loadRes("prefab/effect/"+e,i,(function(r,o){if(r)return console.error("effect load failed",e),void(n&&n());t&&t(o)}))}))},e.loadModelRes=function(e){var r=this;return new Promise((function(t,n){r.loadRes("prefab/model/"+e,i,(function(r,o){if(r)return console.error("model load failed",e),void(n&&n());t&&t(o)}))}))},e.loadMatRes=function(e){var r=this;return new Promise((function(t,n){r.loadRes(""+e,i,(function(r,o){if(r)return console.error("effect load failed",e),void(n&&n());t&&t(o)}))}))},e.loadModelResArr=function(e,r,t,o){var a=r.map((function(r){return e+"/"+r}));n.load(a,i,t,o)},e.loadSpriteFrameRes=function(e){var r=this;return new Promise((function(t,n){r.loadRes(e,a,(function(r,o){if(r)return console.error("spriteFrame load failed!",e,r),void(n&&n());var i=new s;i.image=o;var f=new a;f.texture=i,t&&t(f)}))}))},e.getUIPrefabRes=function(e,r){this.loadRes("prefab/ui/"+e,i,r)},e.createUI=function(e,r,t){this.getUIPrefabRes(e,(function(e,n){if(!e){var o=f(n);o.setPosition(0,0,0),t||(t=u("Canvas")),t.addChild(o),r&&r(null,o)}}))},e.preloadUI=function(e,r){this.getUIPrefabRes(e,(function(e,t){if(!e){var n=f(t);n.setPosition(0,0,0),r&&r(n)}}))},e.getJsonData=function(e,r){this.loadRes("datas/"+e,null,(function(e,t){e?o(e.message||e):t.json?r(e,t.json):r("failed!!!")}))},e.getTextData=function(e,r){this.loadRes("datas/"+e,null,(function(e,t){if(e)o(e.message||e);else{var n=t.text;r(e,n)}}))},e.setSpriteFrame=function(e,r,t){this.loadRes(e+"/spriteFrame",a,(function(n,o){if(n)return console.error("set sprite frame failed! err:",e,n),void t(n);r&&c(r)&&(r.spriteFrame=o,t(null))}))},e}())||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/settingPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./uiManager.ts","./pet.ts"],(function(n){"use strict";var t,e,i,s,o,c,r,u,a,l,p,h,d,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,s=n.assertThisInitialized},function(n){o=n.cclegacy,c=n._decorator,r=n.Node,u=n.SpriteFrame,a=n.Sprite,l=n.Vec3,p=n.Component},function(n){h=n.AudioManager},function(n){d=n.uiManager},function(n){f=n.pet}],execute:function(){var S,g,_,b,M,y,B,O,m,P,w,z,C;o._RF.push({},"ae0596XlUJBe4tleWbOcMb+","settingPanel",void 0);var v=c.ccclass,T=c.property;n("settingPanel",(S=v("settingPanel"),g=T(r),_=T(u),b=T(u),M=T(r),y=T(r),S((m=t((O=function(n){function t(){for(var t,e=arguments.length,o=new Array(e),c=0;c<e;c++)o[c]=arguments[c];return t=n.call.apply(n,[this].concat(o))||this,i(t,"ndBg",m,s(t)),i(t,"sfSelect",P,s(t)),i(t,"sfUnSelect",w,s(t)),i(t,"ndBtnMusic",z,s(t)),i(t,"ndBtnSound",C,s(t)),t._isMusicOpen=!0,t._isSoundOpen=!0,t}e(t,n);var o=t.prototype;return o.show=function(){d.instance.fitScreen(this.ndBg),this._isMusicOpen=h.instance.getAudioSetting(!0),this._changeState(this.ndBtnMusic,this._isMusicOpen),this._isSoundOpen=h.instance.getAudioSetting(!1),this._changeState(this.ndBtnSound,this._isSoundOpen)},o._changeState=function(n,t){var e=n.getComponent(a),i=n.getChildByName("dot"),s=i.position.clone();t?(e.spriteFrame=this.sfSelect,i.setPosition(new l(30,s.y,s.z))):(e.spriteFrame=this.sfUnSelect,i.setPosition(new l(-30,s.y,s.z)))},o.onBtnMusicClick=function(){this._preTab(),this._isMusicOpen=!this._isMusicOpen,this._changeState(this.ndBtnMusic,this._isMusicOpen),this._isMusicOpen?h.instance.openMusic():h.instance.closeMusic()},o.onBtnSoundClick=function(){this._preTab(),this._isSoundOpen=!this._isSoundOpen,this._changeState(this.ndBtnSound,this._isSoundOpen),this._isSoundOpen?h.instance.openSound():h.instance.closeSound()},o.onBtnCloseClick=function(){this._preTab(),d.instance.hideDialog(f.panelPath.SETTING_PANEL)},o._preTab=function(){h.instance.playSound(f.musicList.CLICK)},t}(p)).prototype,"ndBg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(O.prototype,"sfSelect",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(O.prototype,"sfUnSelect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(O.prototype,"ndBtnMusic",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(O.prototype,"ndBtnSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=O))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./gmmBase.ts","./pet.ts"],(function(n){"use strict";var t,i,e,a,s,o,r,l,c,u,p,f,d,h,g;return{setters:[function(n){t=n.inheritsLoose,i=n.createClass},function(n){e=n.cclegacy,a=n._decorator,s=n.isValid,o=n.find,r=n.Vec3,l=n.tween,c=n.resources,u=n.error,p=n.Prefab,f=n.instantiate},function(n){d=n.AudioManager},function(n){h=n.gmmBase},function(n){g=n.pet}],execute:function(){var v,L;e._RF.push({},"0f80aGH/VxOm6BLl7L4BRvL","uiManager",void 0);var _=a.ccclass;a.property,n("uiManager",_("uiManager")(((L=function(n){function e(){for(var t,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return(t=n.call.apply(n,[this].concat(e))||this)._panelList={},t._loadingList={},t.ndCanvas=null,t.other={tipsTimeHd:0,lbTips:null,sfBgTips:null},t}t(e,n);var a=e.prototype;return a.isDialogVisible=function(n){if(!this._panelList.hasOwnProperty(n))return!1;var t=this._panelList[n];return s(t)&&t.active&&t.parent},a.showDialog=function(n,t,i){var a=this;if(!this._loadingList[n]){this._loadingList[n]=!0;var r=n.lastIndexOf("/"),l=n.slice(r+1),c={},u=null;c[l]&&((u=o(c[l]))||console.warn("tkBox node set error!")),t||(t=[]),u||(u=o("Canvas"));var p=this._panelList[n];if(p){if(s(p)){p.parent=u,p.active=!0;var f=p.getComponent(l);return f&&f.show&&f.show.apply(f,t),i&&i(f),void(this._loadingList[n]=!1)}console.warn("err:load panel fail:",p)}e.createUI(n,(function(e,s){if(a._loadingList[n])if(a._loadingList[n]=!1,e)console.error(e);else{a._panelList[n]=s;var o=s.getComponent(l);o&&o.show&&o.show.apply(o,t),i&&i(o)}else a.hideDialog(n)}),u)}},a.hideDialog=function(n,t){if(this._panelList.hasOwnProperty(n)){var i=this._panelList[n];i&&s(i)&&(i.parent=null),t&&t()}this._loadingList[n]=!1},a.preloadDialog=function(n,t){var i=this;e.preloadUI(n,(function(t){i._panelList[n]=t}))},a.loading=function(n){var t=g.panelPath.LOADING_PANEL,i=this._panelList[t];i?i.parent=o("Canvas"):this.preloadDialog(g.panelPath.LOADING_PANEL)},a.showTips=function(n,t,i){var e=this;void 0===n&&(n=""),void 0===t&&(t="tip"),void 0===i&&(i=1500);var a=this;this.getNode("minimsg",(function(s){s.parent||(s.parent=e.getNdCanvas()),a.other.lbTips||(a.other.lbTips=s.getChildByName("txt").getComponent("cc.Label"),a.other.sfBgTips=s.getComponent("cc.Sprite"));var o=new cc.Color(59,44,5,255);"warning"===t&&(o=new cc.Color(173,6,6,255)),a.other.sfBgTips.color=o,cc.Tween.stopAllByTag(10),clearTimeout(a.other.tipsTimeHd),a.other.lbTips.string=n,d.instance.playSound(g.musicList.SOUND_TIP),s.setScale(new r(.01,.01,1)),l(s).tag(10).to(.2,{scale:new r(1,1,1)}).start(),a.other.tipsTimeHd=setTimeout((function(){return s.parent=null}),i)}),"prefab/ui")},a.getNdCanvas=function(){return this.ndCanvas?this.ndCanvas:o("Canvas")},a.preTab=function(){d.instance.playSound(g.musicList.CLICK)},e.loadRes=function(n,t,i){c.load(n,(function(n,t){if(n)return u(n.message||n),void i(n,t);i(null,t)}))},e.getUIPrefabRes=function(n,t){e.loadRes("prefab/ui/"+n,p,t)},e.createUI=function(n,t,i){e.getUIPrefabRes(n,(function(n,e){if(!n){var a=f(e);a.setPosition(0,0,0),i||(i=o("Canvas")),i.addChild(a),t&&t(null,a)}}))},e.preloadUI=function(n,t){e.getUIPrefabRes(n,(function(n,i){if(!n){var e=f(i);e.setPosition(0,0,0),t&&t(e)}}))},e.nodeTween=function(n,t,i,e,a,s){void 0===i&&(i=new r(0,600,0)),void 0===e&&(e=new r(0,0,0)),void 0===a&&(a="sineOut"),void 0===s&&(s=.6),n.setPosition(i),n.active=!0,l(n).to(s,{position:e},{easing:a}).call((function(){t&&t()})).start()},i(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(h))._instance=void 0,v=L))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/userAuth.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./uiManager.ts","./pet.ts","./wee.ts","./go.mjs_cjs=&original=.js","./go.js"],(function(n){"use strict";var e,t,i,o,r,u,a,s,c,l,p,f,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,u=n._decorator,a=n.Node,s=n.Component},function(n){c=n.AudioManager},function(n){l=n.uiManager},function(n){p=n.pet},function(n){f=n.wee},null,function(n){h=n.default}],execute:function(){var d,g,b,y,A,T,_;r._RF.push({},"03692nnsihDIK4aGcv/8ohg","userAuth",void 0);var v=u.ccclass,B=u.property;n("userAuth",(d=v("userAuth"),g=B(a),b=B(a),d((T=e((A=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),u=0;u<t;u++)r[u]=arguments[u];return e=n.call.apply(n,[this].concat(r))||this,i(e,"ndBg",T,o(e)),i(e,"ndTkBox",_,o(e)),e}t(e,n);var r=e.prototype;return r.show=function(){l.instance.fitScreen(this.ndBg),l.nodeTween(this.ndTkBox)},r.onAuthorize=function(n,e){void 0===e&&(e=1);1==e?(this._preTab(),f.doUserAuthorize()):(h.setLocalJson("auth","friend",2),this._preTab())},r.onBtnClose=function(){this._preTab()},r._preTab=function(){c.instance.playSound(p.musicList.CLICK),l.instance.hideDialog(p.panelPath.AUTH_PANEL)},r.update=function(n){},e}(s)).prototype,"ndBg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(A.prototype,"ndTkBox",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=A))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(t){"use strict";var n,r,e,o;return{setters:[function(t){n=t.cclegacy,r=t._decorator,e=t.Vec3,o=t.find}],execute:function(){var c;n._RF.push({},"beff90tShtKM4ozyyUnmF3A","util",void 0);var u=r.ccclass;r.property,t("util",u("util")(c=function(){function t(){}return t.trim=function(t,n){if(void 0===n&&(n="\\s"),!t)return t;var r=new RegExp("(^"+n+"*)|("+n+"*$)","g");return t.replace(r,"")},t.getTwoPosXZLength=function(t,n,r,e){var o=t-r,c=n-e;return Math.sqrt(o*o+c*c)},t.setStringToVec3=function(t,n,r){void 0===n&&(n=","),void 0===r&&(r=0);var o=t.split(n);return new e(Number(o[0]),Number(o[1]),r)},t.setVec3ToString=function(t){return JSON.stringify(Math.round(t.x)+"|"+Math.round(t.y))},t.fnode=function(t){return o("Canvas/"+t)},t.frawnode=function(t){return o(t)},t.getLocalJson=function(t,n,r){void 0===n&&(n=""),void 0===r&&(r="");var e="",o=cc.sys.localStorage.getItem(t);return(o=o?JSON.parse(o):r)?n?e=o[n]:o:e},t.setLocalJson=function(n,r,e){var o=t.getLocalJson(n);return o||(o={}),o[r]=e,o=JSON.stringify(o),cc.sys.localStorage.setItem(n,o),!0},t}())||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/wee.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./pet.ts","./go.mjs_cjs=&original=.js","./go.js"],(function(e){"use strict";var t,n,s,o,r,i,a,u;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){s=e.cclegacy,o=e._decorator,r=e.Component},function(e){i=e.uiManager},function(e){a=e.pet},null,function(e){u=e.default}],execute:function(){var c,l;s._RF.push({},"879e1Kvg9dHLam6cnBVWPsW","wee",void 0);var h=o.ccclass;o.property,e("wee",h("wee")(((l=function(e){function s(){return e.apply(this,arguments)||this}return t(s,e),s.getUserInfo=function(e){var t=null;wx.getSetting({success:function(n){if(n.authSetting["scope.userInfo"])wx.getUserInfo({success:function(n){t=n.userInfo,e&&e(t),console.log("res.userInfo:",t)},fail:function(n){e&&e(t)}});else{var s=wx.getSystemInfoSync(),o=s.screenWidth>600?600:s.screenWidth-40,r=cc.url.raw("resources/images/ui/userInfoButton.png"),i=wx.createUserInfoButton({type:"image",image:r,style:{left:(s.screenWidth-o)/2,top:(s.screenHeight-o)/2,width:o,height:o}});i.onTap((function(n){console.log("button.onTap:",n),n.userInfo&&(t=n.userInfo),e&&e(t),i.destroy()}))}}})},s.getShareContent=function(){var e=s.share.shareContent;return e[Math.floor(Math.random()*e.length)]},s.activeShare=function(e){if(console.log("share...: "),"undefined"==typeof wx)return console.log("Must be in WeChat..."),!1;var t=s.getShareContent();return t?(wx.shareAppMessage({title:t.title,imageUrl:cc.url.raw(s.sharePath+t.url),query:"q=candyfight"}),e&&e(),!0):void 0},s.passiveShare=function(){if("undefined"!=typeof wx){var e=s.getShareContent();e&&(wx.showShareMenu({menus:["shareAppMessage","shareTimeline"],success:function(e){},fail:function(e){}}),wx.onShareAppMessage((function(){return{title:e.title,imageUrl:cc.url.raw(s.sharePath+e.url),query:"q=candyfight"}})))}},s.getPlat=function(){var e="";return"undefined"!=typeof wx&&(e="wx"),e},s.setUserCloudStorage=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1),"wx"!=s.getPlat())return console.log("storage Must be in WeChat..."),!1;var n=(new Date).getTime(),o={wxgame:{score:e,update_time:n}},r=[{key:"wkscore",value:JSON.stringify(o)},{key:"ctime",value:n.toString()},{key:"level",value:t.toString()},{key:"score",value:e.toString()}];wx.setUserCloudStorage({KVDataList:r,success:function(e){console.log("setUserCloudStorage success res:",e)},fail:function(e){console.log("setUserCloudStorage fail res:",e)},complete:function(e){}})},s.doUserAuthorize=function(){if("wx"!=u.getPlat())return console.log("authorize Must be in WeChat..."),!1;wx.getSetting({success:function(e){e.authSetting&&e.authSetting["scope.WxFriendInteraction"]?(console.log("already authorized..."),u.setLocalJson("auth","friend",1),s.isShowRank&&(i.instance.showDialog(a.panelPath.RANK_PANEL),s.isShowRank=!1)):wx.authorize({scope:"scope.WxFriendInteraction",success:function(){console.log("authorize api success"),u.setLocalJson("auth","friend",1),s.isShowRank&&(i.instance.showDialog(a.panelPath.RANK_PANEL),s.isShowRank=!1)},fail:function(){if(console.log("authorize api fail"),u.setLocalJson("auth","friend",2),s.isShowRank){i.instance.showTips("已拒绝授权，要展示排行榜需删除重新进入"),s.isShowRank=!1}}})}})},n(s,null,[{key:"instance",get:function(){return this._instance||(this._instance=new s),this._instance}}]),s}(r))._instance=void 0,l.isShowRank=!0,l.sharePath="resources/images/other/",l.renewRank=0,l.share={shareContent:[{url:"share1.png",title:"闯关吃糖，还原经典消除，卡牌撞击火花四溅，快来尝试吧！"},{url:"share1.png",title:"池中的糖果要被消灭啦！快来使用各种技能道具，让你的消除更有杀伤力！"},{url:"share1.png",title:"快速点三次一样的糖果，快来证明你的反应速度吧！"},{url:"share1.png",title:"糖果管道里的糖果在不停地移动，你需要快速消除它们，否则就会堆积成山！使用玄冰技能，让糖果速度减缓，轻松过关！"},{url:"share1.png",title:"快来加入我们吧，一起享受消糖乐趣！"}]},c=l))||c);s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/resources', 'chunks:///_virtual/resources'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});